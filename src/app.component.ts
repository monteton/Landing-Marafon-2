import { Component, ChangeDetectionStrategy, signal } from '@angular/core';

interface Color {
  name: string;
  hex: string;
}

interface FaqItem {
  question: string;
  answer: string;
}

interface Testimonial {
  beforeUrl: string;
  afterUrl: string;
  text: string;
  author: string;
}

interface PaymentDetail {
  label: string;
  value: string;
}

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  changeDetection: ChangeDetectionStrategy.OnPush,
})
export class AppComponent {
  readonly colors = signal<Color[]>([
    { name: '16-0237 TCX', hex: '#75965A' },
    { name: '12-0322 TCX', hex: '#D4E1C0' },
    { name: '13-0650 TCX', hex: '#C7D33F' },
    { name: '15-1062 TCX', hex: '#F5A92E' },
    { name: '17-1350 TCX', hex: '#F0712A' },
    { name: '17-1563 TCX', hex: '#E54B35' },
  ]);

  copiedDetail = signal<string | null>(null);
  expandedFaqIndex = signal<number | null>(null);

  readonly testimonials = signal<Testimonial[]>([
    { beforeUrl: 'https://picsum.photos/400/500?grayscale&random=1', afterUrl: 'https://picsum.photos/400/500?random=2', text: 'Я никогда не думала, что смогу так измениться! Спасибо Наталье за поддержку и знания.', author: 'Елена П.'},
    { beforeUrl: 'https://picsum.photos/400/500?grayscale&random=3', afterUrl: 'https://picsum.photos/400/500?random=4', text: 'Марафон превзошел все мои ожидания. Я не только похудела, но и обрела уверенность в себе.', author: 'Мария К.'},
    { beforeUrl: 'https://picsum.photos/400/500?grayscale&random=5', afterUrl: 'https://picsum.photos/400/500?random=6', text: 'Это лучшая инвестиция в себя! Программа очень понятная, а результаты говорят сами за себя.', author: 'Ольга С.'}
  ]);

  readonly paymentDetails = signal<PaymentDetail[]>([
    { label: 'Получатель', value: 'Макаренко Наталья Анатольевна' },
    { label: 'Номер счета', value: '40817810200033592807' },
    { label: 'Назначение платежа', value: 'Перевод средств по договору № 5376892385 Макаренко Наталья Анатольевна НДС не облагается' },
    { label: 'БИК', value: '044525974' },
    { label: 'Банк-получатель', value: 'АО "ТБанк"' },
    { label: 'Корр. счет', value: '30101810145250000974' },
    { label: 'ИНН', value: '7710140679' },
    { label: 'КПП', value: '771301001' },
  ]);

  readonly faqItems = signal<FaqItem[]>([
    { question: 'Я никогда не занималась, подойдет ли мне марафон?', answer: 'Конечно, можно! Марафон идеально подходит как для новичков, так и для уже практикующих, но кто хочет получить новые результаты и мотивацию. Мы начинаем с основ и плавно переходим к более сложным упражнениям, поэтому вы точно не почувствуете себя потерянной.' },
    { question: 'Я часто занимаюсь, тренируюсь, будет ли мне полезен ваш марафон?', answer: 'Да, конечно! Марафон полезен не только новичкам и вы наверняка найдете для себя пользу. Ведь в нем не только тренировки, а ещё и видео по питанию, уходу за собой, меню, полезные рецепты, а главное чат единомышленников и поддержка на всём пути, чтобы вы сможете сделать свои новые результаты.' },
    { question: 'Подходит ли мне курс, если у меня есть проблемы со здоровьем?', answer: 'Смотря какие проблемы со здоровьем. Марафон разработан для тех, кому не запрещены тренировки. Если у вас есть хронические заболевания и серьезные ограничения по физическим нагрузкам, пожалуйста, проконсультируйтесь со своим лечащим врачом перед началом марафона. Или напишите мне в ватсап. Я забочусь о вашем здоровье, и моя цель- помочь вам, не навредив.' },
    { question: 'Сколько времени нужно уделять тренировкам?', answer: 'Тренировки занимают 40-60 минут в день, 3 раза в неделю. Я сделала программу максимально удобной и эффективной, чтобы она легко вписалась в ваш рабочий и жизненный график без стресса и спешки.' },
    { question: 'Нужен ли мне абонемент в спортзал?', answer: 'Нет! Я подготовила два варианта тренировок: для дома (с минимальным инвентарем, который легко заменить подручными вещами) и для зала. Вы можете выбрать то, что вам удобнее, и менять формат в любой момент.' },
    { question: 'Смогу ли я похудеть на 10 и больше кг?', answer: 'Результаты индивидуальны и зависят от ваших усилий и изначальных данных. В среднем мои участницы сбрасывают 3-7 кг за 30-45 дней. Важно помнить, что мы нацелены на долговременный результат, а не на временные показатели. Я учу вас правильно питаться и тренироваться, чтобы вес больше не возвращался. Если вы продолжите заниматься, вы сможете победить любые цифры.' },
    { question: 'А если я сорвусь? Меня выгонят из курса?', answer: 'Конечно, нет! Программа марафона построена на принципе поддержки, а не наказания. Срывы - это часть пути, и главное - вернуться и продолжить. В чате поддержки мы поможем вам справиться с этим и найти мотивацию двигаться дальше. Вы всегда можете обратиться ко мне лично.' },
    { question: 'Что будет после окончания марафона? Я опять наберу вес?', answer: 'Марафон «Лучшая версия себя» - это обучение. За 45 дней вы освоите принципы правильного питания и тренировок. Эти знания останутся с вами навсегда, и вы сможете самостоятельно поддерживать результат. Я даю вам удочку, а не просто рыбу.' },
    { question: 'Будут ли индивидуальные консультации?', answer: 'В рамках основного пакета предусмотрена обратная связь в общем чате. Для тех, кому нужно больше моей личной работы, есть возможность приобрести персональные консультации и сопровождение. По этому вопросу напишите сюда Вацап +79772729099' },
    { question: 'Я уже пробовала худеть и не получилось. Чем ваш марафон отличается от других?', answer: 'В отличие от других курсов и марафонов по похудению, я учу вас находить баланс и получать удовольствие от полезной еды и тренировок. Так гораздо меньше срывов и больше желания продолжать путь к своему здоровому и красивому телу. Также, программа учитывает особенности женского организма и возраста (30+). А самое главное - вы получаете сильную поддержку от меня и сообщества единомышленниц, что и является ключом к успеху.' },
    { question: 'Как я получу доступ к материалам?', answer: 'После оплаты вам придет ссылка на закрытую платформу - мобильное приложение, где будут доступны все видеоуроки, меню и чек-листы. Вы сможете смотреть их в удобное для вас время.' },
    { question: 'Можно ли оплатить марафон частями?', answer: 'Да. Вы можете сейчас внести предоплату 1000р., а оставшуюся часть внести до начала марафона. Так вы точно забронируете за собой место и все бонусы.' },
    { question: 'Не проходит оплата, что делать?', answer: 'По всем вопросам связанным с оплатой напишите Вацап +79685189722 и вам помогут разобраться и подобрать удобный способ.' },
  ]);

  copyDetail(value: string) {
    navigator.clipboard.writeText(value).then(() => {
      this.copiedDetail.set(value);
      setTimeout(() => {
        if (this.copiedDetail() === value) {
          this.copiedDetail.set(null);
        }
      }, 2000);
    }).catch(err => console.error('Failed to copy: ', err));
  }

  toggleFaq(index: number) {
    this.expandedFaqIndex.update(currentIndex => currentIndex === index ? null : index);
  }
}